const leboncoin = require('./lib/item');
const filters = require('./lib/filters');
const search = require('./lib/search');
const request = require('request');

var s = new search.Search()
    .setPage(1)
    .setLimit(1)
    .setFilter()
    .setQuery("appartement");

s.run().then(function (data) {
    console.log(data.results[0].getUrl())
    data.results[0].getDetails().then(function (details) {
        console.log(details); // the item 0 with more data such as description, all images, author, ...
    }, function (err) {
        console.error(err);
    });
    data.results[0].getPhoneNumber().then(function (phoneNumer) {
        console.log(phoneNumer); // the phone number of the author if available
    }, function (err) {
        console.error(err); // if the phone number is not available or not parsable (image -> string) 
    });
}, function (err) {
    console.error(err);
});


/*new search.Search()
	.setPage(1)
    .setQuery("renove")
    .run().then(function (data) {
        console.log (data.results[0])
	data.results[0].getPhoneNumber().then(function (details) {
        console.log(details); // the item 0 with more data such as description, all images, author, ...
    }, function (err) {
        console.error(err);
    });
}, function (err) {
                done(err);
});

var item = leboncoin.Item({id: '903589901'});
item.getPhoneNumber().then(function (number) {
	console.log(number);
}, function (error) {
	console.error(error);
})
*/